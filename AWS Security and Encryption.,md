# **Section 26: AWS Security and Encryption**

## **1) Encryption 101**

- ğŸ“Œ **Types of Encryption**
    1. **Encryption in-flight**
        - Data encrypted before sending & decrypted after receiving
        - Uses **TLS**
        - Prevents MITM attacks
        - Example: Client â†’ (Encrypted Data via Certificate) â†’ Server â†’ (Decrypted)
    2. **Server-Side Encryption**
        - Data encrypted **after storing**, decrypted **before sending**
        - Uses a **key**
        - Example: Object â†’ Server {(Key+Object) â†’ Encrypted Data} â†’ Send â†’ Decrypted Object
    3. **Client-Side Encryption**
        - Data encrypted/decrypted by **client**
        - Example: Client â†’ Encrypt(Data+Key) â†’ Server â†’ Store â†’ Send â†’ Decrypt â†’ Client

---

## **2) AWS KMS (Key Management Service)**

- ğŸ“Œ **Overview**
    - Managed service for **key creation & management**
    - Compatible with most AWS services
- ğŸ”‘ **Key Types**
    1. **Symmetric:** single key for encryption & decryption
    2. **Asymmetric:** public key (encrypt) + private key (decrypt), used outside AWS
- ğŸ’° **Key Ownership**
    - Amazon-owned â†’ Free
    - AWS-managed â†’ Free (e.g., aws/s3)
    - Customer-managed â†’ $1/month
- ğŸ“œ **Key Policies**
    - Default: Root user has full access
    - Custom: Define users/roles & admin permissions
- ğŸ”„ **Encrypted AMI Sharing**
    - Share AMI launch permissions & KMS key
    - Target account needs IAM role/user with KMS permissions: `DescribeKey`, `ReEncrypt`, `CreateGrant`, `Decrypt`
    - Optional: Re-encrypt with target account key

---

## **3) AWS SSM Parameter Store & Secrets Manager**

- **SSM Parameter Store**
    - Stores **secrets & configurations**
    - Supports **automation & rotation**
- **Secrets Manager**
    - Stores & rotates secrets automatically
    - Integrated with **RDS, Aurora, etc.**
    - Uses **KMS for encryption**
    - Multi-region replication for disaster recovery
- âœ… **Use Case**
    - Centralized secret management with rotation and encryption

---

## **4) AWS Certificate Manager (ACM)**

- ğŸ“Œ **Purpose**
    - Manage TLS certificates for **HTTPS / in-flight encryption**
- ğŸ”— **Integrations**
    - ALB, CloudFront, API Gateway (not directly EC2)
- ğŸŒŸ **Features**
    - Public & private certificates
    - Automatic renewal for public certificates
    - DNS or email validation (DNS preferred)
    - EventBridge & Config integration for expiration alerts
- ğŸ“ **Notes**
    - Edge-optimized API Gateway â†’ ACM in **us-east-1**
    - Regional API Gateway â†’ ACM in same region as API

---

## **5) AWS WAF (Web Application Firewall)**

- ğŸ“Œ **Purpose**
    - Protect web apps at **Layer 7 (HTTP)**
- ğŸ”— **Deployment Targets**
    - ALB, API Gateway, CloudFront, AppSync, Cognito
- ğŸ›¡ **Web ACLs & Rules**
    - Filter by IP, headers, body, URI, geo, rate-limit
- âš¡ **Fixed IP Use Case**
    - WAF + ALB + **Global Accelerator** â†’ fixed IPs with WAF protection

---

## **6) AWS Shield**

- ğŸ“Œ **Purpose**
    - Protect from **DDoS attacks**
- ğŸ†“ **Shield Standard**
    - Free, layer 3 & 4 protection (SYN floods, UDP, reflection attacks)
- ğŸ’³ **Shield Advanced**
    - $3,000/month
    - Advanced protection, 24/7 DDoS response, auto WAF rules for layer 7
- âœ… **Use Case**
    - Protect high-risk applications from DDoS

---

## **7) Firewall Manager**

- ğŸ“Œ **Purpose**
    - Apply **WAF rules & security policies** across AWS accounts & resources

---

## **8) Amazon GuardDuty**

- ğŸ“Œ **Purpose**
    - Intelligent threat detection using ML, anomaly detection, & 3rd party data
- ğŸ”— **Data Sources**
    - CloudTrail, VPC flow logs, DNS logs, EKS audit logs, RDS/Aurora login, S3/EBS/Lambda events
- âš¡ **Integration**
    - Findings â†’ EventBridge â†’ Lambda / SNS
    - Detects crypto attacks
- âœ… **Use Case**
    - Continuous threat monitoring & automated response

---

## **9) Amazon Inspector**

- ğŸ“Œ **Purpose**
    - Automated **security assessments**
- ğŸ” **Targets**
    - EC2 instances (via SSM)
    - Container images (ECR)
    - Lambda functions
- ğŸ“ **Features**
    - Continuous scanning, CVE database for vulnerabilities
    - Findings â†’ Security Hub / EventBridge
- âœ… **Use Case**
    - Continuous assessment & centralized reporting

---

## **10) Amazon Macie**

- ğŸ“Œ **Purpose**
    - Data security & privacy
    - Detect & protect **PII in S3**
- ğŸ”— **Integration**
    - EventBridge â†’ SNS / Lambda
- âœ… **Use Case**
    - Automated PII discovery & compliance reporting

---

## **Key Takeaways**

- **Encryption:** in-flight, server-side, client-side
- **KMS:** key management, symmetric/asymmetric, AMI sharing
- **SSM & Secrets Manager:** secret storage, rotation, multi-region replication
- **ACM:** TLS management, ALB/API Gateway/CloudFront integration
- **WAF & Shield:** HTTP firewall, DDoS protection
- **GuardDuty, Inspector, Macie:** intelligent threat detection, vulnerability scanning, PII discovery
